\usepackage[
    activate={true,nocompatibility},
    final,
    tracking=true,
    kerning=true,
    spacing=true,
    factor=1100,
    stretch=10,
    shrink=10
]{microtype}   % Enhances typographic quality (kerning, spacing, tracking)

% LANGUAGE TRANSLATIONS ------------------------------------------------------------------
\usepackage[brazilian]{babel} % Language and hyphenation rules for Brazilian Portuguese
\addto\captionsbrazilian{\renewcommand{\contentsname}{Table of contents}} % Customize the table of contents title
% LANGUAGE TRANSLATIONS ------------------------------------------------------------------

%\usepackage{mathpazo}
%\linespread{1.1}

\usepackage{lettrine}   % Enables dropped capital letters at the beginning of chapters
\usepackage{graphicx}   % Standard package for including graphics
\usepackage{xcolor}     % Enables custom color definitions
\usepackage{sourcesanspro}
\renewcommand{\familydefault}{\sfdefault}
\linespread{1.15}
\usepackage{tikz}       % Powerful vector drawing library
\usetikzlibrary{math,positioning,shadows.blur} % TikZ sublibraries
\usepackage{url}
\usepackage{pgfornament}
\usepackage{sourcecodepro}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{amssymb}
% Define additional colors for syntax highlighting
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% Default settings for all code blocks
\lstset{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\usepackage{tcolorbox}

\newcommand{\hsp}{\kern 1pt}    % Custom command for fine-tuning spacing in nested quotation marks

% Paragraph formatting settings
\renewcommand{\baselinestretch}{1.125}      % Increases line spacing for improved readability
\setlength{\parskip}{0pt}                   % Disables additional vertical spacing between paragraphs
\setlength{\parindent}{1em}                 % Sets standard paragraph indentation

% Sentence spacing (prevents extra space after periods)
\frenchspacing

% Avoid widows and orphans in text layout
\widowpenalty=10000
\clubpenalty=10000

% Page dimensions and margins (suitable for trade paperback format)
\usepackage[
    paperheight=9in,
    paperwidth=6in,
    top=0.75in,
    bottom=0.75in,
    outer=0.75in,
    inner=0.875in
]{geometry}

% Relax overfull hbox warnings by allowing flexible spacing
\sloppy

% Table of contents customization
\usepackage[titles]{tocloft}
\renewcommand{\cftchapfont}{\large\itshape}       % Chapter titles in TOC: large italic
\renewcommand{\cftchappagefont}{\normalfont}      % Page numbers in TOC: normal font
\renewcommand{\numberline}[1]{}                   % Remove chapter numbers in TOC

% Chapter heading customization
\usepackage[center,sc]{titlesec} % Chapter titles: centered and small caps

% Roman numerals for chapter numbers
\renewcommand{\thechapter}{\arabic{chapter}}

% Define chapter title format
\titleformat{\chapter}[block]
  {\normalfont\scshape\huge\centering}
  {\thechapter\\}
  {0pt}
  {}
\titlespacing*{\chapter}{0pt}{0pt}{1em}
\makeatletter
\renewcommand{\@makechapterhead}[1]{%
  \vspace*{50pt}
  {\parindent \z@ \centering \normalfont
    \scshape \huge 
    \ifnum\c@chapter>0
    \thechapter \par {#1}\par\nobreak
    \vspace{0.5em}
    \begin{tikzpicture}[scale=0.8]
\foreach \x in {0,0.2,...,2.0} {
    \fill (\x,0) circle (0.03);
    \fill (\x,0.2) circle (0.03);
}
\draw[line width=0.5pt] (-0.1,-0.1) rectangle (2.1,0.3);
\end{tikzpicture}\par
    \vspace{1.5em}
    \else
      #1\par\nobreak
      \vspace{1em}
    \fi
  }}
\makeatother

% Header and footer settings
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}
\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields

\renewcommand{\headrulewidth}{0pt} % Remove header rule line

\fancyhf[CFE,CFO]{\thepage}        % Page number centered in footer (even and odd pages)
%\fancyhead[LE,RO]{\thepage}       % Alternative page numbering in header corners
\fancyhead[CE]{\itshape\authorname} % Author name centered on even-page headers
\fancyhead[CO]{\itshape\booktitle}  % Book title centered on odd-page headers

% Custom color definitions
\definecolor{customgold}{RGB}{203,161,53}   % Define a gold tone for accent use
\definecolor{darkmagenta}{RGB}{139, 0, 139} 
\definecolor{ultradarkmagenta}{RGB}{50, 0, 50}
